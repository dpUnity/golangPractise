# golang練習

[TOC]

## 基本規則

* 同一個目錄下的go腳本一定要在同一個package下
* 同一個package可以不用import就直接用另一個腳本的方法
* 同專案不同package要引用的話路徑要這樣帶ex: {專案名稱}/{路徑}
* 要呼叫別的package的方法用上面的範例import之後只要用路徑最後的腳本名稱.公開方法就好
* 一定要是main package才能使用main方法作為整個程式的進入點
* 不用分號



## 變數 

### 對應練習腳本

variablePractice

### 宣告方式

```go
var 變數名稱 型別 ＝ 值 //單一宣告方式
```

```go
var (
  變數名稱 型別 = 值
  變數名稱 型別 = 值
)//一次宣告多個
```



### 宣告注意事項

* 函式內宣告了變數一定要用

* 不管在哪宣告都可以省略型別，和TS一樣，語言會自行判斷型別

* 可以用英文外的語言命名，但拜託不要這麼做

* 按書上來說指定型別但不指定初始值，那預設是零值（zero value）

* 有時候一定要給型別不然類似型別會讓go混淆，ＥＸ：

  ```go
  var seed = 123456789
  rand.Seed(seed) //這樣會出錯，因為該方法要的是int64，但系統判斷seed為int
  ```



### 變數的零值

* 每個型別的零值不一樣，請參考下表

|類型|零值(預設值)|
|---|---|
|bool|false|
|所有數字|0|
|string|""(空字串)|
|其他物件類型的東西(存在heap的)|nil|



### 短宣告方式

```go
變數名稱 := 值

//可一次宣告多個
變數名稱1,變數名稱2,變數名稱N := 值1,值2,值N

//可用來接回傳多個變數的回傳值
變數名稱1,變數名稱2,變數名稱3 := getFamily()
func getFamily() (string, int, time.Time) {
	return "Dad", 70, time.Now()
}

```

### 短宣告注意事項

* 只能在方法內用喔！

### var單行多重宣告

* var 後面一次宣告多個變數名稱再接個型別，此方法會一次宣告多個同型別的變數

```go
var 變數名稱1,變數名稱2,變數名稱N 型別
```

* 若要不同型別，則不帶型別給相同數量的初始值

```go
var 變數名稱1,變數名稱2,變數名稱N = "Pao",32,true
```

* 拿來接多變數的回傳值也可以

```go
var 變數名稱1,變數名稱2,變數名稱3 = getFamily()
func getFamily() (string, int, time.Time) {
	return "Dad", 70, time.Now()
}
```

### 變數賦予值

* 直接等於就好

```go
var name = "Pao"
name = "Koli"
```

* 可以一次塞多個
```go
var name,age,isFemale = "Pao",32,false
name,age,isFemale = "Koli",31,true
```

### 作用域

* 當全域變數和區域變數同名時，呼叫該名稱只會叫到區域變數的
* 完全沒辦法叫到全域變數的
* 要叫全域變數的只能另外開方法取得



## 運算符號

算術運算符（＋-8/%）和比較運算符（=、!、<、>）用法都跟Ｃ＃一樣



## 指標

### 注意事項

* 當一個值被賦予指標，那他就只會在heap上，不會在stack上
* 指標的意思就是記憶體位置
* 同型別的指標互相比較只會是false，因為他比的是記憶體位置而不是裡面的值
* 結構體（struct）的指標印出來不會是明確的記憶體位置
* 結構體（struct）不用特地用＊取得指標指導的值，可以用String()印出值，透過＊只是在印出來時把＆拿掉而已，因為指標被解除了

### 宣告方式

1. 預設值為nil的宣告，此宣告方式因為沒帶該型別的預設值，所以預設為nil
  ```go
  var 變數名稱 *型別 //此方法不能用短宣告
  ```
2. 帶該型別預設值的宣告
  ```go
  var 變數名稱 new(型別)
  //方法內的話還可以這樣做↓
  變數名稱 := new(型別)
  ```
3. 取得該變數的指標的方法
  ```go
  變數 := &變數2
  ```

### 從指標取值

* 取得值的方式（依書上的說法）

```go
變數 := *指標變數
```

### 常數與列舉（enum）

* 常數的用法就只是把var改成const而已，其他規則都一樣
* go並沒有enum，直接用const來代替，只是可以用iota來協助宣告，ＥＸ：
	```go
	const (
		None = iota, // 0
		Empty				 // 1
		Normal			 // 2
		Medium			 // 3
		High				 // 4
		Full				 // 5
	)
	```